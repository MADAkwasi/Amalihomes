@let sectionData = data();
<header *ngIf="sectionData">
  <app-internationalization-bar [locale]="sectionData.locale"></app-internationalization-bar>
  <nav class="flex justify-between items-center text-xs py-[0.8rem] border-b-border border-b page-horizontal-padding">
    <a routerLink="/"> <img src="images/logo.svg" alt="logo" /></a>

    <app-navlinks [navLinks]="sectionData.navLinks" class="hidden lg:flex"></app-navlinks>

    <span class="flex items-center">
      <lib-button
        type="tetiary"
        size="small"
        (buttonClick)="onOpenSearchField()"
        buttonStyles="!w-fit !px-4"
        buttonIdentifier="search-button"
      >
        <lucide-icon [img]="searchIcon" [size]="18"></lucide-icon>
      </lib-button>

      @if(isAuthenticated){
      <lib-button type="tetiary" buttonStyles="!w-fit !px-4" buttonIdentifier="shopping-cart-button">
        <lucide-icon [img]="cartIcon" [size]="18"></lucide-icon>
      </lib-button>
      <img class="h-7 cursor-pointer" src="images/user.png" alt="user" />

      }@else {
      <lib-button class="!w-fit hidden lg:!block" buttonIdentifier="login-button">{{
        sectionData.buttonText
      }}</lib-button>
      }

      <lib-button
        aria-label="Toggle search input field"
        buttonStyles="!w-fit !block !px-0 !ml-4 lg:!hidden"
        type="tetiary"
        (buttonClick)="onMenuToggle()"
        buttonIdentifier="menu-button"
      >
        <lucide-icon
          [img]="isMenuOpen() ? closeIcon : menuIcon"
          [size]="18"
          [color]="isMenuOpen() ? '#ea690c' : '#000'"
        ></lucide-icon>
      </lib-button>
    </span>
  </nav>

  <app-menu
    *ngIf="isMenuOpen()"
    [isAuthenticated]="isAuthenticated"
    [navLinks]="sectionData.navLinks"
    [placeholder]="sectionData.inputPlaceholder"
    [authBtn]="sectionData.buttonText"
  ></app-menu>
  <app-search-field
    [searchPlaceholer]="sectionData.inputPlaceholder"
    class="w-[100%] absolute"
    [class]="isMenuOpen() ? 'hidden lg:block' : ''"
  ></app-search-field>
</header>

<!-- Displays loading skeletons while header data is fetched -->
<div
  *ngIf="!sectionData"
  class="flex justify-between items-center bg-white border-b border-b-gray-200 page-horizontal-padding pb-3 pt-[5rem] overflow-x-hidden"
>
  <div appSkeleton class="w-24 h-7 rounded-md"></div>
  <div class="flex items-center gap-4">
    <div appSkeleton class="w-20 h-5 rounded-md"></div>
    <div appSkeleton class="w-20 h-5 rounded-md"></div>
    <div appSkeleton class="w-20 h-5 rounded-md"></div>
    <div appSkeleton class="w-20 h-5 rounded-md"></div>
    <div appSkeleton class="w-20 h-5 rounded-md"></div>
  </div>
  <div appSkeleton class="w-24 h-11 rounded-md"></div>
</div>
