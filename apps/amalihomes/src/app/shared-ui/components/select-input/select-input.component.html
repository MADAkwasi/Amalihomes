<div class="select-wrapper">
  @if (label()) {
  <label class="select-label" [for]="label()">{{ label() }}</label>
  }

  <div
    class="select-trigger"
    [attr.id]="label()"
    [class.disabled]="disabled()"
    [class.open]="isOpen()"
    (click)="toggleDropdown()"
    tabindex="0"
    (keydown.enter)="toggleDropdown()"
    (keydown.space)="toggleDropdown(); $event.preventDefault()"
  >
    <span class="selected-value" [class.placeholder]="!control()?.value">
      {{ selectedLabel() }}
    </span>
    <div class="dropdown-icon">
      <lucide-icon [img]="arrowIcon" class="icon"></lucide-icon>
    </div>
  </div>

  @if (isOpen()) {
  <div class="dropdown-options">
    @for (option of options(); track option.value) {
    <div
      class="option"
      (click)="selectOption(option.value)"
      (keydown.enter)="selectOption(option.value)"
      (keydown.space)="selectOption(option.value); $event.preventDefault()"
      tabindex="0"
      [class.selected]="control()?.value === option.value"
    >
      {{ option.label }}
    </div>
    }
  </div>
  <div
    class="dropdown-backdrop"
    (click)="closeDropdown()"
    (keydown.enter)="closeDropdown()"
    (keydown.space)="closeDropdown(); $event.preventDefault()"
    tabindex="0"
  ></div>
  }
</div>
